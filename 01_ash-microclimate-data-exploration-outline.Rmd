---
title: "ash-microclimate-data-exploration"
author: "Deidre Jaeger"
date: "10/25/2018"
output: html_document
---

Data Exploration Steps
*Step 1:* load data and make sure it has correct date, number, and factor classes
*Step 2:* view the histograms of before and after treatments


1. histogram of the temperature measurements of each sensor (x axis = sensor #, y axis = freq)
   - are there any erroneous measurement?
2. time series plot for each of the 4 sensors (x-axis = time, y axis = temperature F)
3. combined time series plots for all 4 sensors

3) check if sensors were turned off during morning of day 3 (Sep 20)
  - omit the times when the treatment sensors were off on Sept 20
  
```{r load-libraries}
library(dplyr) # for mutate() functionality
library(lubridate) # for as.POSIX function
library(ggplot2)
options(stringsAsFactors = FALSE) # so that dates read in as character strings not factors (factors are troublesome for converting to dates)

```
  
```{r load-data}

# read csv file
ash_data <- read.csv("data/ash-microclimate-data2018.csv", header = T) 

# check structure
str(ash_data) # darn, we dont have the factors and date formatted anymore

# reset date and factors
ash_data <- ash_data %>% 
  mutate(date_time = ymd_hms(date_time), sensor_sn = as.factor(sensor_sn), sensor_name = as.factor(sensor_name), ash_removal = as.factor(ash_removal))

# recheck structure to make sure date=POSIXct, tempF = num, and everything else is a factor- except we don't care about the "X" factor
str(ash_data) 

```

```{r view-histograms-by-sensor}

ash_data %>% # define date
  ggplot() +
  geom_histogram(mapping = aes(x= tempF), bins = 40) + # define x axis
  facet_grid(facets = sensor_name ~ ash_removal) # define which variables to panel vertical and horizontal graphs with

```

```{r view-time-series-by-sensor}

ash_data %>% 
  ggplot() +
  geom_point(mapping = aes(x = date_time, y = tempF,
                           color = ash_removal)) +
  facet_wrap( facets = ~ sensor_name)


```



