---
title: "ash-microclimate-data-cleaning"
author: "Deidre Jaeger"
date: "10/12/2018"
output: html_document
---

```{r install-packages-library}
install.packages("dplyr")
install.packages("lubridate")
library(dplyr) # mutate function
library(lubridate) # as.POSIX function
options(stringsAsFactors = FALSE) # makes dates strings
```

```{r import-treatment-data}
# treatment 100e before removal
treatment_100e_before <- read.csv("data/SN 20439121 2018-09-20 00_06_33 -0600.csv", skip = 1, header = TRUE, col.names = c("date_time", "tempF", "sensor_sn", "sensor_name", "ash_removal", "blank1"))

treatment_100e_before$blank1 <- NULL
treatment_100e_before$sensor_sn <- rep(20439121)
treatment_100e_before$sensor_name <- rep("treatment_100e")
treatment_100e_before$ash_removal <- rep("before_removal")

head(treatment_100e_before)

str(treatment_100e_before)

#############

# treatment 100e after removal
treatment_100e_after <- read.csv("data/SN 20439121 2018-09-26 10_27_52 -0600.csv", skip = 1, header = TRUE, col.names = c("date_time", "tempF", "sensor_sn", "sensor_name", "ash_removal", "blank1"))

treatment_100e_after$blank1 <- NULL
treatment_100e_after$sensor_sn <- rep(20439121)
treatment_100e_after$sensor_name <- rep("treatment_100e")
treatment_100e_after$ash_removal <- rep("after_removal")

head(treatment_100e_after)

str(treatment_100e_after)  
```

```{r}
# treatment 101w before removal
treatment_101w_before <- read.csv("data/SN 20439119 2018-09-20 00_07_03 -0600.csv", skip = 1, header = TRUE, col.names = c("date_time", "tempF", "sensor_sn", "sensor_name", "ash_removal", "blank1"))

treatment_101w_before$blank1 <- NULL
treatment_101w_before$sensor_sn <- rep(20439119)
treatment_101w_before$sensor_name <- rep("treatment_101w")
treatment_101w_before$ash_removal <- rep("before_removal")

head(treatment_101w_before)

str(treatment_101w_before)

#############

# treatment 101w after removal
treatment_101w_after <- read.csv("data/SN 20439119 2018-09-26 10_22_57 -0600.csv", skip = 1, header = TRUE, col.names = c("date_time", "tempF", "sensor_sn", "sensor_name", "ash_removal", "blank1"))

treatment_101w_after$blank1 <- NULL
treatment_101w_after$sensor_sn <- rep(20439119)
treatment_101w_after$sensor_name <- rep("treatment_101we")
treatment_101w_after$ash_removal <- rep("after_removal")

head(treatment_101w_after)

str(treatment_101w_after) 
```


```{r import-control-data}
control_103_data <- read.csv("data/SN 20397886 2018-09-26 10_27_32 -0600.csv", skip = 1, header = TRUE, col.names = c("date_time", "tempF", "sensor_sn", "sensor_name", "ash_removal", "blank1"))

control_103_data$blank1 <- NULL
control_103_data$sensor_sn <- rep(20397886)
control_103_data$sensor_name <- rep("control_103")
str(control_103_data)

control_103_data <- control_103_data %>% mutate(date_time = ymd_hms(date_time))
control_103_data_before <- control_103_data %>% filter(date_time <= "2018-09-20 00:03:59") %>% mutate(ash_removal = "before_removal") 
control_103_data_after <- control_103_data %>% filter(date_time <= "2018-09-20 12:21:00")
control_103_data %>% filter(date_time >= "2018-09-20 00:04:00" | date_time <= "2018-09-20 12:20:59") # still needs to be fixed!!!!! #########################
                                                     
```

```{r import-control-data}
control_103_data <- read.csv("data/SN 20397886 2018-09-26 10_27_32 -0600.csv", skip = 1, header = TRUE, col.names = c("date_time", "tempF", "sensor_sn", "sensor_name", "ash_removal", "blank1"))

control_103_data$blank1 <- NULL
control_103_data$sensor_sn <- rep(20397886)
control_103_data$sensor_name <- rep("control_103")

control_103_data <- control_103_data %>% mutate(date_time = ymd_hms(date_time))
control_103_data_before <- control_103_data %>% filter(date_time <= "2018-09-20 00:03:59") %>% mutate(ash_removal = "before_removal") 
control_103_data_after <- control_103_data %>% filter(date_time <= "2018-09-20 12:21:00")
control_103_data %>% filter(date_time >= "2018-09-20 00:04:00" | date_time <= "2018-09-20 12:20:59") # still needs to be fixed!!!!! #########################
                                                     
```



